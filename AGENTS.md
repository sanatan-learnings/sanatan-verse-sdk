# Agent Instructions

## Release Workflow

When the user asks to publish/release, bump the version in `setup.py`, commit, then run:

```bash
# Build, upload to PyPI, commit version bump, create + push git tag
bash scripts/publish.sh --yes --skip-testpypi

# Create GitHub release
gh release create vX.Y.Z --title "vX.Y.Z" --notes "..."
```

**Version guidelines:** Always bump the middle number only: `0.31.x` → `0.32.0` → `0.33.0` etc. Never use patch versions (x.x.N). Only bump as part of the release commit — never during development.

## Commit Message Format

```
<type>: <description> (#issue)

Co-Authored-By: Claude Sonnet 4.6 <noreply@anthropic.com>
```

Types: `feat`, `fix`, `docs`, `refactor`, `chore`

## Project Structure

```
_data/collections.yml          # collection registry (subject, subject_type, permalink_base, etc.)
_verses/<collection>/          # verse markdown files (dash format: chaupai-01.md)
data/verses/<collection>.yaml  # canonical Devanagari text
data/themes/<collection>/      # DALL-E theme configs
data/scenes/<collection>.yml   # scene descriptions for image generation
data/sources/                  # source texts for RAG indexing (PDF/TXT/MD)
data/puranic-index/            # indexed episode YAML (generated by verse-index-sources)
data/embeddings/               # embedding vectors per source (generated by verse-index-sources)
```

## When Changing File Paths or Structure

Update references in: `docs/commands/*.md`, `verse_sdk/cli/*.py` (help text), `README.md`
